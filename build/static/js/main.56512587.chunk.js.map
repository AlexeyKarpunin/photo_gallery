{"version":3,"sources":["pages/Main/index.js","hooks/albumManager.js","pages/Photographer/index.js","pages/NotFound404/index.js","pages/Gallery/index.js","hooks/usePopup.js","App.js","index.js","api/api.js"],"names":["Main","useState","users","setUsers","useEffect","api","getUsers","then","res","json","catch","error","Error","className","map","user","User","name","id","props","to","albumManager","this","albums","Map","get","album","set","Photographer","userAlbums","setUserAlbums","useParams","userId","getUserAlmubs","style","padding","Album","title","auth","albumPhotos","setAlbumPhotos","history","useHistory","thisAlbum","getAlbum","getAlbumPhotos","setAlbum","onClick","push","src","thumbnailUrl","length","NotFound404","Gallery","photos","setPhotos","galleryId","popup","popupStatus","setPopupStatus","undefined","link","openImg","setOpenImg","nextImg","prev","url","prevImg","closePopup","initPopup","openPopup","initPopupPhotos","forEach","photo","usePopup","img","e","App","exact","path","component","ReactDOM","render","StrictMode","document","getElementById","module","exports","getAlbums","fetch","albumId"],"mappings":"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","file":"static/js/main.56512587.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\"\nimport { Link } from \"react-router-dom\";\nimport api from '../../api/api';\n\nexport default function Main () {\n    const [users, setUsers] = useState([]);\n\n    useEffect( () => {\n        api.getUsers()\n           .then( (res) => res.json())\n           .then( (json) => setUsers(json))\n           .catch( (error) => {throw new Error(error)});\n    }, []);\n\n    return (\n        <section>\n            <div className=\"container\">\n                <h1>Our photographers</h1>\n                <ul className=\"users--list\">\n                  {users.map( (user) => {\n                    return <User\n                            key={user.id}\n                            name={user.name}\n                            id={user.id}\n                          />\n                    })}\n                </ul>\n            </div>\n        </section>\n    );\n}\n\nfunction User (props) {\n    return (\n        <li className=\"users--list__item\">\n            <Link to={`/photographer/${props.name}/${props.id}`}>{props.name}</Link>\n        </li>\n    )\n}","class AlbumMeneger {\n    constructor () {\n        this.albums = new Map();\n    }\n\n    getAlbum (id) {\n        return this.albums.get(id);\n    }\n\n    setAlbum (id, album) {\n        this.albums.set(id, album);\n    }\n}\n\nconst albumManager = new AlbumMeneger();\n\nexport default albumManager;","import api from '../../api/api';\nimport albumManager from '../../hooks/albumManager';\nimport { useEffect, useState } from \"react\"\nimport { useHistory, useParams } from \"react-router\";\n\nexport default function Photographer () {\n    const [userAlbums, setUserAlbums] = useState([]);\n    const {id: userId, name} = useParams();\n\n    useEffect( () => {\n        api.getUserAlmubs(userId)\n           .then( (res) => res.json())\n           .then( (json) => setUserAlbums(json))\n           .catch( (error) => {throw new Error(error)});\n    }, []);\n\n  \n    return (\n       <section>\n           <h1 style={{padding: \"50px 0 0 0\"}}>{name}</h1>\n           <div className=\"container user__albums\">\n               {userAlbums.map( (album) => {\n                   return <Album \n                            key={album.id}\n                            id={album.id}\n                            title={album.title}\n                            auth={name}\n                          />\n               })}\n           </div>\n       </section>\n    )\n}\n\nfunction Album (props) {\n    const [albumPhotos, setAlbumPhotos] = useState([]);\n\n    const history = useHistory();\n\n    useEffect (() => {\n        const thisAlbum = albumManager.getAlbum(props.id)\n        if (thisAlbum) return setAlbumPhotos(thisAlbum);\n        api.getAlbumPhotos(props.id)\n           .then( (res) => res.json())\n           .then( (json) => {\n               setAlbumPhotos(json);\n               albumManager.setAlbum(props.id, json);\n           })\n           .catch( (error) => {throw new Error(error)});\n    }, []);\n\n    function toGellery () {\n        history.push(`/gallery/${props.auth}/${props.id}`)\n    }\n\n    return (\n        <div className='user__album'>\n            <img className=\"small__img\" onClick={toGellery} src={albumPhotos[0] ? albumPhotos[0].thumbnailUrl : ''}></img> <br />\n            <span>{props.title}</span> <br />\n            <span>Photos in gallery {albumPhotos.length}</span>\n        </div>\n    )\n}","export default function NotFound404 () {\n    return (\n        <div>PAGE WAS NOT FOUND ERROR 404</div>\n    );\n}","import { useEffect, useState } from \"react\"\nimport { useParams } from \"react-router\";\nimport api from \"../../api/api\";\nimport usePopup from \"../../hooks/usePopup\";\nimport albumManager from '../../hooks/albumManager';\n\nexport default function Gallery () {\n    const [photos, setPhotos] = useState([]);\n    const {id: galleryId} = useParams();\n    const popup = usePopup();\n\n    useEffect (() => {\n        const thisAlbum = albumManager.getAlbum(galleryId)\n        if (thisAlbum) {\n            popup.initPopupPhotos(thisAlbum);\n            return setPhotos(thisAlbum);\n        }\n\n        api.getAlbumPhotos(galleryId)\n           .then( (res) => res.json())\n           .then( (json) => {\n                setPhotos(json)\n                popup.initPopupPhotos(json);\n           })\n           .catch( (error) => {throw new Error(error)});\n    }, []);\n\n    \n\n    return (\n        <section>\n            <div className=\"container gallery\">\n                {photos.map( (img) => {\n                   return <img className=\"big__img\" key={img.id} onClick={ (e) => popup.openPopup(img.id)} src={img.url}></img>\n                })}\n            </div>\n            {popup.initPopup()}\n        </section>\n    )\n} \n\n","import { useState } from \"react\";\n\nexport default function usePopa () {\n    const [photos, setPhotos] = useState(new Map());\n    const [popupStatus, setPopupStatus] = useState(false);\n    const [openImg, setOpenImg] = useState({id: undefined, link: \"\"});\n\n    function nextImg () {\n        const nextImg = openImg.id + 1;\n        if (photos.get(nextImg)) {\n            setOpenImg( (prev) => { return {...prev, link: photos.get(nextImg).url, id: nextImg}});\n        }\n    }\n\n    function prevImg () {\n        const prevImg = openImg.id - 1;\n        if (photos.get(prevImg)) {\n            setOpenImg( (prev) => { return {...prev, link: photos.get(prevImg).url, id: prevImg}});\n        }\n    }\n\n    function initPopup () {\n        return (\n            <div className={`popup ${popupStatus ? \"popup_active\" : \"\"}`}>\n                <div className=\"popup__container\">\n                  <div onClick={prevImg} className=\"popup_btn popup_btn_next\"></div>\n                  <img className=\"popup__img\" src={openImg.link}></img>\n                  <div onClick={nextImg} className=\"popup_btn popup_btn_prev\"></div>\n                </div>\n                <div onClick={closePopup} className=\"popup_close\">+</div>\n            </div>\n        )\n    }\n\n    function initPopupPhotos (photos) {\n        setPhotos(prev => {\n            photos.forEach( photo => {\n                prev.set(photo.id, photo);\n            });\n            return prev;\n        });\n    }\n\n    function openPopup(id) {\n        setOpenImg( (prev) => { return {...prev, link: photos.get(id).url, id}});\n        setPopupStatus(true);\n    }\n\n    function closePopup () {\n        setPopupStatus(false)\n    }\n\n    return {\n        initPopup,\n        openPopup,\n        initPopupPhotos,\n    };\n}","import Main from './pages/Main/index';\nimport Photographer from './pages/Photographer/index';\nimport NotFound404 from './pages/NotFound404/index';\nimport Gallery from './pages/Gallery/index';\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\n\nfunction App() {\n\n  return (\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\" component={Main} />\n        <Route exact path=\"/photographer/:name/:id\" component={Photographer} />\n        <Route exact path=\"/gallery/:name/:id\" component={Gallery} />\n        <Route component={NotFound404} />\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","\nfunction getAlbums () {\n   return fetch('https://jsonplaceholder.typicode.com/albums');\n}\n\nfunction getUsers () {\n    return fetch('https://jsonplaceholder.typicode.com/users');\n}\n\nfunction getUserAlmubs(userId) {\n    return fetch(`https://jsonplaceholder.typicode.com/albums?userId=${userId}`)\n}\n\nfunction getAlbumPhotos (albumId) {\n    return fetch(`https://jsonplaceholder.typicode.com/photos?albumId=${albumId}`)\n}\n\nmodule.exports = {\n    getAlbums,\n    getUsers,\n    getUserAlmubs,\n    getAlbumPhotos\n};"],"sourceRoot":""}